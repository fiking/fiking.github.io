---
title: The_Garbage_Collection_Chapter_11
tags:
  - hexo
categories:
  - web 应用
date: 2024-11-05 01:03:37
description:
---

# 第11章 运行时接口

一个自动内存分配管理系统的核心是回收器和分配器，它们的算法和数据结构，但是如果它们没有提供合适的访问方法给程序，或者它们自身没有合理地接入底层平台，则几乎无毫无使用价值。此外，有些算法对编程语言的实现有特殊的要求，例如，需要提供一些信息或维护特定不变性。回收器（和分配器）和系统其余部分之间的接口都是本章关注的，包括上层的语言和编译器，以及下面的操作系统和系统库。

我们按顺序考虑以下事情，新对象分配；寻找和调整对象、全局区域和栈里的指针；访问或更新指令或对象的操作（屏障）；修改器和回收器之间的同步；管理地址空间；和使用虚拟内存。

 <!-- more -->

## 分配接口

从编程语言的视角看，一个创建新对象的请求不只是返回一个已分配的对象，也需要按语言和它的实现的全部要求进行初始化。不同的语言覆盖了广泛的需求。需求的一端是C，它只要求一个新分配的指定大小的存储单元 -- 单元里的值是任意的，初始化这个单元完全是程序员的责任。在范围的另一端则是纯函数式语言，如Haskell，其在语言级别上需要为一个新对象的所有域都提供一个新值，无法访问未初始化的对象。

### 加速分配

### 置零

## 寻找指针

为了确定可达性，回收器需要寻找指针。一些算法策略需要指针的精确知识。

### 保守指针查找

### 使用标志值的精确指针查找

### 对象里的精确指针查找

### 全局根里的精确指针查找

### 栈和寄存器里的精确指针查找

### 代码里的精确指针查找

### 处理内部指针

### 处理派生指针

## 对象表

## 来自外部代码的引用

## 栈屏障

